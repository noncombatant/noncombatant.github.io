function amzn_ads(e){"use strict";try{amznads.updateAds(e)}catch(e){try{console.log("amzn_ads: "+e)}catch{}}}function aax_write(e,t){e.write(t),e.close()}function aax_render_ad(e){if(e.passback)return void aax_write(document,e.html);if(t=e.slotSize,!t)return void aax_write(document,e.html);var t,n,s,o=t.indexOf("x"),a=t.substring(0,o),r=t.substring(o+1),i="amznad"+Math.round(1e6*Math.random());aax_write(document,'<iframe id="'+i+'" width="'+a+'" height="'+r+`" src="javascript:''" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" bgcolor="#FFFFFF" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0"></iframe>`);try{n=document.getElementById(i),s=n.contentWindow||n.contentDocument,s.document&&(s=s.document),aax_write(s,e.html)}catch{n&&(n.style.display="none")}}var amznads,amzn_console=function(){"use strict";var e={};return e.log=function(){},e}();window.console&&(amzn_console=window.console),amznads=function(e,t,n,s){"use strict";function i(t,n,s){this.startTime=null,this.stopTime=null,this.sourceId=n,this.sync=t,this.mode=s,this.latency=null,i.prototype.startTimer=function(){this.startTime=Date.now()},i.prototype.stopTimer=function(){this.stopTime=Date.now()},i.prototype.stopTimerAndReportLatency=function(){this.stopTimer(),this.calculateLatency(),this.isThrottled()||this.reportLatency()},i.prototype.calculateLatency=function(){this.latency=this.stopTime-this.startTime,e.log("amznads bid request latency: "+this.latency+" milliseconds")},i.prototype.isThrottled=function(){var n,t=parseInt(e.latencySamplingRate,10);if(!(t!=t)){if(0==t)return!0;if(100==t)return!1;if(n=100*Math.random(),t>=n)return!1}return!0},i.prototype.reportLatency=function(){if(null!=this.latency&&this.latency>0){var t='/{"c":"dtb","src":"'+this.sourceId+'","'+(this.sync?"bls":"bla")+'":"'+this.latency+'","m":"'+this.mode+'"}',n=e.protocol+e.host+e.px_svc+"PH"+t;(new Image).src=n}}}function o(s,i,a,r,c,l,d){this.element=s,this.impId=c,this.win=l,this.doc=d,this.start=null,this.end=null,this.area=null,this.cutoff=i,this.cutoffTime=1e3*a,this.focused=null,this.timer=!1,this.timerStarted=!1,this.getDuration=r,this.reported=!1,this.above=null,this.totalTime=0,this.leftPos=null,this.topPos=null,o.prototype.calcArea=function(){try{var u=t.getElementsByTagName("body")[0],j=n.top.innerWidth||t.documentElement.clientWidth||u.clientWidth,g=n.top.innerHeight||t.documentElement.clientHeight||u.clientHeight,d=e.$jQ(n).scrollTop(),s=e.$jQ(this.element).offset().top,c=e.$jQ(this.element).height(),l=e.$jQ(n).scrollLeft(),a=e.$jQ(this.element).offset().left,r=e.$jQ(this.element).width(),f=Math.max(s,d),p=Math.min(s+c,d+g),i=p-f,i=Math.max(0,i),v=Math.max(a,l),b=Math.min(a+r,l+j),o=b-v,o=Math.max(0,o),h=i*o,m=r*c;return this.leftPos=a/e.$jQ(t).width(),this.topPos=s/e.$jQ(t).height(),h/m}catch(t){e.log("calcArea failed for ad id="+this.element+"; error="+t)}return 0},o.prototype.displayTime=function(){if(this.getDuration){var t=this.end-this.start;e.log(this.element+" viewed for: "+t),this.totalTime+=t}},o.prototype.adInView=function(){e.log(this.element+" IN VIEW")},o.prototype.adNotInView=function(){e.log(this.element+" NOT IN VIEW")},o.prototype.seenForTime=function(){e.log(this.element+" displayed for "+this.cutoffTime/1e3+" seconds"),e.log(" "),this.reported=!0;try{encodeURIComponent(location.protocol+location.host+location.pathname)}catch(e){this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error encoding url - "+e))+"}]}")}try{this.firePixel('/{"adViewability":[{"viewable": true }]}')}catch(t){e.log(t),this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error sending pixel - "+t))+"}]}")}},o.prototype.firePixel=function(t){(new Image).src=e.protocol+e.host+e.px_svc+this.impId+t+"&cb="+Math.round(1e7*Math.random())},o.prototype.getAreaTime=function(){function a(){n.reported||(n.timer=setTimeout(function(){n.seenForTime()},n.cutoffTime))}function o(){n.adInView(),n.start=new Date,a(),n.timerStarted=!0}function i(){clearTimeout(n.timer),n.timerStarted=!1,n.end=new Date,n.adNotInView(),n.displayTime()}var s,n=this;if(null==this.area){this.area=this.calcArea(),this.area>this.cutoff?this.above=!0:this.above=!1;try{this.firePixel('/{"adViewability":[{"above_the_fold": '+this.above+', "topPos": '+this.topPos+', "leftPos": '+this.leftPos+"}]}")}catch(t){e.log(t),this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error sending pixel - "+t))+"}]}")}}s=this.calcArea(),t.hasFocus()&&(0==this.focused||null==this.focused)&&s>this.cutoff&&0==this.timerStarted&&o(),t.hasFocus()?this.focused=!0:this.area>this.cutoff&&1==this.focused&&(i(),this.focused=!1),(this.area>=this.cutoff&&s<this.cutoff||this.area<this.cutoff&&s>=this.cutoff)&&(s>=this.cutoff&&0==this.timerStarted?o():s<this.area&&i()),this.area=s},o.prototype.collectData=function(){var t=this;t.getAreaTime(),e.$jQ(n).on("scroll resize focus blur",function(){t.reported||t.getAreaTime()})}}var a="https:"===t.location.protocol;return e.latencyUtil=e.latencyUtil||null,e.protocol=a?"https://":"http://",e.DEFAULT_HOST="aax.amazon-adsystem.com",e.host=e.DEFAULT_HOST,e.dtb_svc="/e/dtb/bid",e.pb_svc="/x/getad",e.px_svc="/x/px/",e.debug_mode=e.debug_mode||!1,e.MIN_TIMEOUT=0,e.DEFAULT_TIMEOUT=1e3,e.targetingKey="amznslots",e.latencySamplingRate=1,e.vidKey="amzn_vid",e.tasks=e.tasks||[],e.$jQ=e.$jQ||null,e.VIEWABILITY_CUTOFF_AREA=e.VIEWABILITY_CUTOFF_AREA||.5,e.VIEWABILITY_CUTOFF_DURATION_SEC=e.VIEWABILITY_CUTOFF_DURATION_SEC||1,e.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz",e.isjQueryPresent=function(){if("function"==typeof e.$jQ)return!0;try{if(n.top.jQuery&&n.top.jQuery.fn.on&&n.top.jQuery.fn.scrollTop)return e.$jQ=n.top.jQuery,!0}catch{}return!1},e.log=function(t){try{e.debug_mode&&s.log(t)}catch{}},e.log("Initiating amznads"),e.ads||(e.ads={}),e.updateAds=function(t){if(e.ads=t.ads,e.ev=t.ev,t.vads){e.ads||(e.ads={});var n;for(n in t.vads)t.vads.hasOwnProperty(n)&&(e.ads[n]=t.vads[n],e.amzn_vid=t.vads[n])}e.log("Updated ads. Executing rest of the task queue"),e.doAllTasks(),e.tasks.push=function(t){e.doTask(t)};try{t.lsr&&(e.latencySamplingRate=t.lsr),null!=e.latencyUtil&&e.latencyUtil.stopTimerAndReportLatency()}catch{}},e.saveAds=function(t){e.saved_ads=t.ads,e.updateAds(t)},e.getAdForSlot=function(n,s,o){e.src_id=n;var a,c,r=r||{},i=r.u;i||(i=e.getReferrerURL()),i&&-1!==i.indexOf("amzn_debug_mode")&&(e.debug_mode=!0),e.log("amznads.getAdForSlot: Using url="+i),c="src="+e.src_id+"&slot_uuid="+s+"&c=100&u="+i+"&cb="+Math.round(1e7*Math.random()),a=e.protocol+e.host+e.pb_svc+"?jsd=1&"+c,e.log("amznads.getAdAdForSlot: "+(o?"Async ":"")+"Call to: "+a),o?e.appendScriptTag(a):aax_write(t,"<script type='text/javascript' src='"+a+"'><\/script>")},e.getAdsCallback=function(t,n,s,o,i){var a=null,i=i||{};try{n&&"function"==typeof n&&(a=e.handleCallBack(n,s))}catch(t){e.log("amznads.getAdsAsyncWithCallback(): Error occured in setting up callback functionality."+t)}i.to||(i.to=s),e.doGetAdsAsync(t,o,i,a)},e.getVideoAdsCallback=function(t,n,s,o,i){var i=i||{};i.mt="V",e.getAdsCallback(t,n,s,o,i)},e.getDisplayAdsCallback=function(t,n,s,o,i){var i=i||{};i.mt="D",e.getAdsCallback(t,n,s,o,i)},e.getAdsAsync=function(t,n,s){e.doGetAdsAsync(t,n,s)},e.getVideoAdsAsync=function(t,n,s){var s=s||{};s.mt="V",e.getAdsAsync(t,n,s)},e.getDisplayAdsAsync=function(t,n,s){var s=s||{};s.mt="D",e.getAdsAsync(t,n,s)},e.handleCallBack=function(t,s){var a=!1,o=null,i=function(e){if(!a){try{t(e),o&&clearTimeout(o)}catch{}a=!0}},r=e.getValidMilliseconds(s);return o=r?n.setTimeout(i,r):n.setTimeout(i,e.DEFAULT_TIMEOUT),i},e.getValidMilliseconds=function(t){if(!t)return!1;try{var n=~~Number(t);if(n>e.MIN_TIMEOUT)return n}catch(t){return e.log("amznads.isValidMilliseconds(): Invalid timeout specified."+t),!1}return!1},e.getAds=function(n,s,o,a){if(a)return void e.doGetAdsAsync(n,s,o);var r=e.getScriptSource(n,s,o);e.log("amznads.getAds: Call to: "+r);try{e.latencyUtil=new i(!0,n,o&&o.mt?o.mt:"DV"),e.latencyUtil.startTimer()}catch{}aax_write(t,"<script type='text/javascript' src='"+r+"'><\/script>")},e.getVideoAds=function(t,n,s,o){var s=s||{};s.mt="V",e.getAds(t,n,s,o)},e.getDisplayAds=function(t,n,s,o){var s=s||{};s.mt="D",e.getAds(t,n,s,o)},e.doGetAdsAsync=function(t,n,s,o){var a=e.getScriptSource(t,n,s);e.log("amznads.getAds: Async Call to: "+a);try{e.latencyUtil=new i(!1,t,s&&s.mt?s.mt:"DV"),e.latencyUtil.startTimer()}catch{}e.appendScriptTag(a,o)},e.getScriptSource=function(n,s,o){e.src_id=n;var a,d,o=o||{},i=o.u,r=o.d,c=o.to,l=o.mt;if(i||(i=e.getReferrerURL()),i&&-1!==i.indexOf("amzn_debug_mode")&&(e.debug_mode=!0),e.ads&&(e.log("amznads.getAds(): clear out existing ads"),e.clearTargetingFromGPTAsync(),e.ads={}),e.saved_ads&&(e.ads=e.saved_ads),r)try{t.domain=r,e.log("amznads.getAds(): Using domain="+r)}catch(t){e.log("amznads.getAds(): Unable to override document domain with '"+r+"'; exception="+t)}return e.log("amznads.getAds(): Using url="+i),a="src="+n+"&u="+i+"&cb="+Math.round(1e7*Math.random()),s&&(a+="&sz="+s),c&&(a+="&t="+c),l&&(a+="&mt="+l),d=e.protocol+e.host+e.dtb_svc+"?"+a,d},e.getReferrerURL=function(){var s=encodeURIComponent(t.documentURI);try{s=encodeURIComponent(n.top.location.href),s&&"undefined"!=s||(s=e.detectIframeAndGetURL())}catch{s=e.detectIframeAndGetURL()}return s},e.detectIframeAndGetURL=function(){try{if(n.top!==n.self)return e.log("Script is loaded within iFrame"),encodeURIComponent(t.referrer)}catch{return encodeURIComponent(t.documentURI)}},e.appendScriptTag=function(n,s){var i=t.getElementsByTagName("script")[0],o=t.createElement("script");o.type="text/javascript",o.async=!0,o.src=n;try{s&&"function"==typeof s&&(o.readyState?(o.onreadystatechange=function(){("loaded"==o.readyState||"complete"==o.readyState)&&(o.onreadystatechange=null,s(!0))},e.log("amznads.appendScriptTag: setting callBack function for < IE-8 ")):(o.onload=function(){s(!0)},e.log("amznads.appendScriptTag: setting callBack function for all other browsers exluding  < IE-8")))}catch(t){e.log("amznads.appendScriptTag: Could not associate callBack function; "+t)}i.parentNode.insertBefore(o,i)},e.renderAd=function(t,n){if(e.log("amznads.renderAd: key="+n+"; ad-tag="+e.ads[n]),e.ads[n])o=e.ads[n],e.ev&&(a="amznad"+Math.round(1e6*Math.random()),o=o.replace("window.top.amznads.detectViewability","window.amzncsm.rmD"),o=o.replace(/id=[^ ]*/,'id="'+a+'"'),i="<script type='text/javascript' src='"+e.CSM_JS+`'><\/script>
`,e.host!=e.DEFAULT_HOST&&(i+=`<script type='text/javascript'>try{amzncsm.host=window.top.amznads.host;}catch(e){amzncsm.host=amznads.host;}<\/script>
`),o=i+o),aax_write(t,o);else{s=new Object,s.c="dtb",s.src=e.src_id,s.kvmismatch=1,s.pubReturnedKey=n,s.aaxReturnedKeys=e.getTokens(),s.cb=Math.round(1e7*Math.random());try{s.u=encodeURIComponent(location.host+location.pathname),navigator&&(s.ua=encodeURIComponent(navigator.userAgent))}catch{}var s,o,i,a,r=encodeURIComponent(JSON.stringify(s)),c=e.protocol+e.host+"/x/px/p/0/"+r;e.log("amznads.renderAd: keyValueMismatch detected, pubReturnedKey="+n+", aaxReturnedKeys="+e.getTokens()),aax_write(t,"<img src='"+c+"'/>")}},e.detectViewability=function(t,s,i,a){e.isjQueryPresent()&&(i===n.top?new o(t,e.VIEWABILITY_CUTOFF_AREA,e.VIEWABILITY_CUTOFF_DURATION_SEC,!0,s,i,a).collectData():new o(i.frameElement,e.VIEWABILITY_CUTOFF_AREA,e.VIEWABILITY_CUTOFF_DURATION_SEC,!0,s,i,a).collectData())},e.hasAds=function(t){var n;if(!t)try{return Object.keys(e.ads).length>0}catch(t){e.log("amznads.hasAds: looks like IE 8 (and below): "+t);for(n in e.ads)if(e.ads.hasOwnProperty(n))return!0}for(n in e.ads)if(e.ads.hasOwnProperty(n)&&n.indexOf(t)>0)return!0;return!1},e.getTargeting=function(){var n={};return e.getTokens()&&e.getTokens().length>0&&(n[e.targetingKey]=e.getTokens(),e.amzn_vid&&(n[e.vidKey]=e.amzn_vid)),n},e.setTargeting=function(t,n){var s;for(s in e.ads)if(e.ads.hasOwnProperty(s)){if(n&&s.indexOf(n)<0)continue;t(s,"1")}},e.setTargetingForGPTAsync=function(t){try{if(t){e.targetingKey=t;var s,n=e.getTokens();"undefined"!=typeof n&&n.length>0&&googletag.cmd.push(function(){googletag.pubads().setTargeting(t,n),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid)})}else for(s in e.ads)e.ads.hasOwnProperty(s)&&!function(){var t=s;e.log("amznads.setTargetingForGPTAsync: pushing localKey="+t),googletag.cmd.push(function(){amznads.debug_mode&&amznads.log("amznads.setTargetingForGPTAsync: localKey="+t),googletag.pubads().setTargeting(t,"1"),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid)})}();e.log("amznads.setTargetingForGPTAsync: Completed successfully. Number of ads returned by Amazon: "+Object.keys(e.ads).length)}catch(t){e.log("amznads.setTargetingForGPTAsync: ERROR - "+t)}},e.setTargetingForGPTSync=function(t){try{if(t){e.targetingKey=t;var s,n=e.getTokens();"undefined"!=typeof n&&n.length>0&&(googletag.pubads().setTargeting(t,n),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid))}else for(s in e.ads)e.ads.hasOwnProperty(s)&&(googletag.pubads().setTargeting(s,"1"),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid));e.log("amznads.setTargetingForGPTSync: Completed successfully. Number of ads returned by Amazon: "+Object.keys(e.ads).length)}catch(t){e.log("amznads.setTargetingForGPTSync: ERROR - "+t)}},e.clearTargetingFromGPTAsync=function(){try{googletag&&googletag.pubads()&&googletag.pubads().clearTargeting(e.targetingKey),googletag.pubads().clearTargeting(e.vidKey)}catch{}},e.appendTargetingToAdServerUrl=function(t){var n,s=t;try{-1===t.indexOf("?")&&(t+="?");for(n in e.ads)e.ads.hasOwnProperty(n)&&(t+="&"+n+"=1");e.log("amznads.appendTargetingToAdServerUrl: Completed successfully. Number of ads returned by Amazon: "+e.ads.length)}catch(t){e.log("amznads.appendTargetingToAdServerUrl: ERROR - "+t)}return e.log("amznads.appendTargetingToAdServerUrl: input url: "+s+`
returning url: `+t),t},e.appendTargetingToQueryString=function(t){var n,s=t;try{for(n in e.ads)e.ads.hasOwnProperty(n)&&(t+="&"+n+"=1")}catch(t){e.log("amznads.appendTargetingToQueryString: ERROR - "+t)}return e.log("amznads.appendTargetingToQueryString: input query-string:"+s+`
returning query-string:`+t),t},e.getTokens=function(t){var n,s=[];try{for(n in e.ads)if(e.ads.hasOwnProperty(n)){if(t&&n.indexOf(t)<0)continue;s.push(n)}}catch(t){e.log("amznads.getTokens: ERROR - "+t)}return e.log("amznads.getTokens: returning tokens = "+s),s},e.getKeys=e.getTokens,e.getVid=function(){return e.amzn_vid},e.doAllTasks=function(){for(;e.tasks.length>0;){var t=e.tasks.shift();e.doTask(t)}},e.doTask=function(t){try{t.call()}catch(t){e.log("Failed calling task: "+t)}},e.tryGetAdsAsync=function(){e.asyncParams&&e.getAdsCallback(e.asyncParams.id,e.asyncParams.callbackFn,e.asyncParams.timeout,e.asyncParams.size,e.asyncParams.data)},e}(amznads||{},document,window,amzn_console),amznads.tryGetAdsAsync(),window.amzn_ads=amzn_ads,window.amznads=amznads