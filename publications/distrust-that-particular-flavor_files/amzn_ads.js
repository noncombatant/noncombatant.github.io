function amzn_ads(e){"use strict";try{amznads.updateAds(e)}catch(e){try{console.log("amzn_ads: "+e)}catch(e){}}}function aax_write(e,t){e.write(t),e.close()}function aax_render_ad(e){if(e.passback)return void aax_write(document,e.html);if(t=e.slotSize,!t)return void aax_write(document,e.html);var t,n,s,o=t.indexOf("x"),a=t.substring(0,o),r=t.substring(o+1),i="amznad"+Math.round(1e6*Math.random());aax_write(document,'<iframe id="'+i+'" width="'+a+'" height="'+r+'" src="javascript:\'\'" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" bgcolor="#FFFFFF" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0"></iframe>');try{n=document.getElementById(i),s=n.contentWindow||n.contentDocument,s.document&&(s=s.document),aax_write(s,e.html)}catch(e){n&&(n.style.display="none")}}var amzn_console=function(){"use strict";var e={};return e.log=function(){},e}(),amznads;window.console&&(amzn_console=window.console),amznads=function(e,t,n,i){"use strict";function o(t,n,s){this.startTime=null,this.stopTime=null,this.sourceId=n,this.sync=t,this.mode=s,this.latency=null,o.prototype.startTimer=function(){this.startTime=Date.now()},o.prototype.stopTimer=function(){this.stopTime=Date.now()},o.prototype.stopTimerAndReportLatency=function(){this.stopTimer(),this.calculateLatency(),this.isThrottled()||this.reportLatency()},o.prototype.calculateLatency=function(){this.latency=this.stopTime-this.startTime,e.log("amznads bid request latency: "+this.latency+" milliseconds")},o.prototype.isThrottled=function(){var n,t=parseInt(e.latencySamplingRate,10);if(!isNaN(t)){if(0==t)return!0;if(100==t)return!1;if(n=100*Math.random(),t>=n)return!1}return!0},o.prototype.reportLatency=function(){if(null!=this.latency&&this.latency>0){var t='/{"c":"dtb","src":"'+this.sourceId+'","'+(this.sync?"bls":"bla")+'":"'+this.latency+'","m":"'+this.mode+'"}',n=e.protocol+e.host+e.px_svc+"PH"+t;(new Image).src=n}}}function s(o,i,a,r,c,l,d){this.element=o,this.impId=c,this.win=l,this.doc=d,this.start=null,this.end=null,this.area=null,this.cutoff=i,this.cutoffTime=1e3*a,this.focused=null,this.timer=!1,this.timerStarted=!1,this.getDuration=r,this.reported=!1,this.above=null,this.totalTime=0,this.leftPos=null,this.topPos=null,s.prototype.calcArea=function(){try{var h=t.getElementsByTagName("body")[0],b=n.top.innerWidth||t.documentElement.clientWidth||h.clientWidth,v=n.top.innerHeight||t.documentElement.clientHeight||h.clientHeight,r=e.$jQ(n).scrollTop(),a=e.$jQ(this.element).offset().top,c=e.$jQ(this.element).height(),l=e.$jQ(n).scrollLeft(),o=e.$jQ(this.element).offset().left,u=e.$jQ(this.element).width(),f=Math.max(a,r),j=Math.min(a+c,r+v),s=j-f,s=Math.max(0,s),p=Math.max(o,l),g=Math.min(o+u,l+b),i=g-p,i=Math.max(0,i),d=s*i,m=u*c;return this.leftPos=o/e.$jQ(t).width(),this.topPos=a/e.$jQ(t).height(),d/m}catch(t){e.log("calcArea failed for ad id="+this.element+"; error="+t)}return 0},s.prototype.displayTime=function(){if(this.getDuration){var t=this.end-this.start;e.log(this.element+" viewed for: "+t),this.totalTime+=t}},s.prototype.adInView=function(){e.log(this.element+" IN VIEW")},s.prototype.adNotInView=function(){e.log(this.element+" NOT IN VIEW")},s.prototype.seenForTime=function(){e.log(this.element+" displayed for "+this.cutoffTime/1e3+" seconds"),e.log(" "),this.reported=!0;try{encodeURIComponent(location.protocol+location.host+location.pathname)}catch(e){this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error encoding url - "+e))+"}]}")}try{this.firePixel('/{"adViewability":[{"viewable": true }]}')}catch(t){e.log(t),this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error sending pixel - "+t))+"}]}")}},s.prototype.firePixel=function(t){(new Image).src=e.protocol+e.host+e.px_svc+this.impId+t+"&cb="+Math.round(1e7*Math.random())},s.prototype.getAreaTime=function(){function a(){n.reported||(n.timer=setTimeout(function(){n.seenForTime()},n.cutoffTime))}function o(){n.adInView(),n.start=new Date,a(),n.timerStarted=!0}function i(){clearTimeout(n.timer),n.timerStarted=!1,n.end=new Date,n.adNotInView(),n.displayTime()}var s,n=this;if(null==this.area){this.area=this.calcArea(),this.area>this.cutoff?this.above=!0:this.above=!1;try{this.firePixel('/{"adViewability":[{"above_the_fold": '+this.above+', "topPos": '+this.topPos+', "leftPos": '+this.leftPos+"}]}")}catch(t){e.log(t),this.firePixel('/{"adViewability":[{"error": '+JSON.stringify(encodeURIComponent("Error sending pixel - "+t))+"}]}")}}s=this.calcArea(),t.hasFocus()&&(0==this.focused||null==this.focused)&&s>this.cutoff&&0==this.timerStarted&&o(),t.hasFocus()?this.focused=!0:this.area>this.cutoff&&1==this.focused&&(i(),this.focused=!1),(this.area>=this.cutoff&&s<this.cutoff||this.area<this.cutoff&&s>=this.cutoff)&&(s>=this.cutoff&&0==this.timerStarted?o():s<this.area&&i()),this.area=s},s.prototype.collectData=function(){var t=this;t.getAreaTime(),e.$jQ(n).on("scroll resize focus blur",function(){t.reported||t.getAreaTime()})}}var a="https:"===t.location.protocol;return e.latencyUtil=e.latencyUtil||null,e.protocol=a?"https://":"http://",e.DEFAULT_HOST="aax.amazon-adsystem.com",e.host=e.DEFAULT_HOST,e.dtb_svc="/e/dtb/bid",e.pb_svc="/x/getad",e.px_svc="/x/px/",e.debug_mode=e.debug_mode||!1,e.MIN_TIMEOUT=0,e.DEFAULT_TIMEOUT=1e3,e.targetingKey="amznslots",e.latencySamplingRate=1,e.vidKey="amzn_vid",e.tasks=e.tasks||[],e.$jQ=e.$jQ||null,e.VIEWABILITY_CUTOFF_AREA=e.VIEWABILITY_CUTOFF_AREA||.5,e.VIEWABILITY_CUTOFF_DURATION_SEC=e.VIEWABILITY_CUTOFF_DURATION_SEC||1,e.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz",e.isjQueryPresent=function(){if("function"==typeof e.$jQ)return!0;try{if(n.top.jQuery&&n.top.jQuery.fn.on&&n.top.jQuery.fn.scrollTop)return e.$jQ=n.top.jQuery,!0}catch(e){}return!1},e.log=function(t){try{e.debug_mode&&i.log(t)}catch(e){}},e.log("Initiating amznads"),e.ads||(e.ads={}),e.updateAds=function(t){if(e.ads=t.ads,e.ev=t.ev,t.vads){e.ads||(e.ads={});var n;for(n in t.vads)t.vads.hasOwnProperty(n)&&(e.ads[n]=t.vads[n],e.amzn_vid=t.vads[n])}e.log("Updated ads. Executing rest of the task queue"),e.doAllTasks(),e.tasks.push=function(t){e.doTask(t)};try{t.lsr&&(e.latencySamplingRate=t.lsr),null!=e.latencyUtil&&e.latencyUtil.stopTimerAndReportLatency()}catch(e){}},e.saveAds=function(t){e.saved_ads=t.ads,e.updateAds(t)},e.getAdForSlot=function(c,r,o){e.src_id=c;var s,a,i=i||{},n=i.u;n||(n=e.getReferrerURL()),n&&-1!==n.indexOf("amzn_debug_mode")&&(e.debug_mode=!0),e.log("amznads.getAdForSlot: Using url="+n),a="src="+e.src_id+"&slot_uuid="+r+"&c=100&u="+n+"&cb="+Math.round(1e7*Math.random()),s=e.protocol+e.host+e.pb_svc+"?jsd=1&"+a,e.log("amznads.getAdAdForSlot: "+(o?"Async ":"")+"Call to: "+s),o?e.appendScriptTag(s):aax_write(t,"<script type='text/javascript' src='"+s+"'><\/script>")},e.getAdsCallback=function(i,n,s,a,t){var o=null,t=t||{};try{n&&"function"==typeof n&&(o=e.handleCallBack(n,s))}catch(t){e.log("amznads.getAdsAsyncWithCallback(): Error occured in setting up callback functionality."+t)}t.to||(t.to=s),e.doGetAdsAsync(i,a,t,o)},e.getVideoAdsCallback=function(n,s,o,i,t){var t=t||{};t.mt="V",e.getAdsCallback(n,s,o,i,t)},e.getDisplayAdsCallback=function(n,s,o,i,t){var t=t||{};t.mt="D",e.getAdsCallback(n,s,o,i,t)},e.getAdsAsync=function(t,n,s){e.doGetAdsAsync(t,n,s)},e.getVideoAdsAsync=function(n,s,t){var t=t||{};t.mt="V",e.getAdsAsync(n,s,t)},e.getDisplayAdsAsync=function(n,s,t){var t=t||{};t.mt="D",e.getAdsAsync(n,s,t)},e.handleCallBack=function(a,r){var o=!1,t=null,s=function(e){if(!o){try{a(e),t&&clearTimeout(t)}catch(e){}o=!0}},i=e.getValidMilliseconds(r);return t=i?n.setTimeout(s,i):n.setTimeout(s,e.DEFAULT_TIMEOUT),s},e.getValidMilliseconds=function(t){if(!t)return!1;try{var n=~~Number(t);if(n>e.MIN_TIMEOUT)return n}catch(t){return e.log("amznads.isValidMilliseconds(): Invalid timeout specified."+t),!1}return!1},e.getAds=function(s,i,n,r){if(r)return void e.doGetAdsAsync(s,i,n);var a=e.getScriptSource(s,i,n);e.log("amznads.getAds: Call to: "+a);try{e.latencyUtil=new o(!0,s,n&&n.mt?n.mt:"DV"),e.latencyUtil.startTimer()}catch(e){}aax_write(t,"<script type='text/javascript' src='"+a+"'><\/script>")},e.getVideoAds=function(n,s,t,o){var t=t||{};t.mt="V",e.getAds(n,s,t,o)},e.getDisplayAds=function(n,s,t,o){var t=t||{};t.mt="D",e.getAds(n,s,t,o)},e.doGetAdsAsync=function(n,i,t,a){var s=e.getScriptSource(n,i,t);e.log("amznads.getAds: Async Call to: "+s);try{e.latencyUtil=new o(!1,n,t&&t.mt?t.mt:"DV"),e.latencyUtil.startTimer()}catch(e){}e.appendScriptTag(s,a)},e.getScriptSource=function(a,l,n){e.src_id=a;var o,d,n=n||{},s=n.u,i=n.d,r=n.to,c=n.mt;if(s||(s=e.getReferrerURL()),s&&-1!==s.indexOf("amzn_debug_mode")&&(e.debug_mode=!0),e.ads&&(e.log("amznads.getAds(): clear out existing ads"),e.clearTargetingFromGPTAsync(),e.ads={}),e.saved_ads&&(e.ads=e.saved_ads),i)try{t.domain=i,e.log("amznads.getAds(): Using domain="+i)}catch(t){e.log("amznads.getAds(): Unable to override document domain with '"+i+"'; exception="+t)}return e.log("amznads.getAds(): Using url="+s),o="src="+a+"&u="+s+"&cb="+Math.round(1e7*Math.random()),l&&(o+="&sz="+l),r&&(o+="&t="+r),c&&(o+="&mt="+c),d=e.protocol+e.host+e.dtb_svc+"?"+o,d},e.getReferrerURL=function(){var s=encodeURIComponent(t.documentURI);try{s=encodeURIComponent(n.top.location.href),s&&"undefined"!=s||(s=e.detectIframeAndGetURL())}catch(t){s=e.detectIframeAndGetURL()}return s},e.detectIframeAndGetURL=function(){try{if(n.top!==n.self)return e.log("Script is loaded within iFrame"),encodeURIComponent(t.referrer)}catch(e){return encodeURIComponent(t.documentURI)}},e.appendScriptTag=function(i,s){var o=t.getElementsByTagName("script")[0],n=t.createElement("script");n.type="text/javascript",n.async=!0,n.src=i;try{s&&"function"==typeof s&&(n.readyState?(n.onreadystatechange=function(){("loaded"==n.readyState||"complete"==n.readyState)&&(n.onreadystatechange=null,s(!0))},e.log("amznads.appendScriptTag: setting callBack function for < IE-8 ")):(n.onload=function(){s(!0)},e.log("amznads.appendScriptTag: setting callBack function for all other browsers exluding  < IE-8")))}catch(t){e.log("amznads.appendScriptTag: Could not associate callBack function; "+t)}o.parentNode.insertBefore(n,o)},e.renderAd=function(i,s){if(e.log("amznads.renderAd: key="+s+"; ad-tag="+e.ads[s]),e.ads[s])n=e.ads[s],e.ev&&(a="amznad"+Math.round(1e6*Math.random()),n=n.replace("window.top.amznads.detectViewability","window.amzncsm.rmD"),n=n.replace(/id=[^ ]*/,'id="'+a+'"'),o="<script type='text/javascript' src='"+e.CSM_JS+"'><\/script>\n",e.host!=e.DEFAULT_HOST&&(o+="<script type='text/javascript'>try{amzncsm.host=window.top.amznads.host;}catch(e){amzncsm.host=amznads.host;}<\/script>\n"),n=o+n),aax_write(i,n);else{t=new Object,t.c="dtb",t.src=e.src_id,t.kvmismatch=1,t.pubReturnedKey=s,t.aaxReturnedKeys=e.getTokens(),t.cb=Math.round(1e7*Math.random());try{t.u=encodeURIComponent(location.host+location.pathname),navigator&&(t.ua=encodeURIComponent(navigator.userAgent))}catch(e){}var t,n,o,a,r=encodeURIComponent(JSON.stringify(t)),c=e.protocol+e.host+"/x/px/p/0/"+r;e.log("amznads.renderAd: keyValueMismatch detected, pubReturnedKey="+s+", aaxReturnedKeys="+e.getTokens()),aax_write(i,"<img src='"+c+"'/>")}},e.detectViewability=function(a,o,t,i){e.isjQueryPresent()&&(t===n.top?new s(a,e.VIEWABILITY_CUTOFF_AREA,e.VIEWABILITY_CUTOFF_DURATION_SEC,!0,o,t,i).collectData():new s(t.frameElement,e.VIEWABILITY_CUTOFF_AREA,e.VIEWABILITY_CUTOFF_DURATION_SEC,!0,o,t,i).collectData())},e.hasAds=function(n){var t;if(!n)try{return Object.keys(e.ads).length>0}catch(n){e.log("amznads.hasAds: looks like IE 8 (and below): "+n);for(t in e.ads)if(e.ads.hasOwnProperty(t))return!0}for(t in e.ads)if(e.ads.hasOwnProperty(t)&&t.indexOf(n)>0)return!0;return!1},e.getTargeting=function(){var t={};return e.getTokens()&&e.getTokens().length>0&&(t[e.targetingKey]=e.getTokens(),e.amzn_vid&&(t[e.vidKey]=e.amzn_vid)),t},e.setTargeting=function(s,n){var t;for(t in e.ads)if(e.ads.hasOwnProperty(t)){if(n&&t.indexOf(n)<0)continue;s(t,"1")}},e.setTargetingForGPTAsync=function(t){try{if(t){e.targetingKey=t;var s,n=e.getTokens();"undefined"!=typeof n&&n.length>0&&googletag.cmd.push(function(){googletag.pubads().setTargeting(t,n),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid)})}else for(s in e.ads)e.ads.hasOwnProperty(s)&&!function(){var t=s;e.log("amznads.setTargetingForGPTAsync: pushing localKey="+t),googletag.cmd.push(function(){amznads.debug_mode&&amznads.log("amznads.setTargetingForGPTAsync: localKey="+t),googletag.pubads().setTargeting(t,"1"),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid)})}();e.log("amznads.setTargetingForGPTAsync: Completed successfully. Number of ads returned by Amazon: "+Object.keys(e.ads).length)}catch(t){e.log("amznads.setTargetingForGPTAsync: ERROR - "+t)}},e.setTargetingForGPTSync=function(t){try{if(t){e.targetingKey=t;var s,n=e.getTokens();"undefined"!=typeof n&&n.length>0&&(googletag.pubads().setTargeting(t,n),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid))}else for(s in e.ads)e.ads.hasOwnProperty(s)&&(googletag.pubads().setTargeting(s,"1"),e.amzn_vid&&googletag.pubads().setTargeting(e.vidKey,e.amzn_vid));e.log("amznads.setTargetingForGPTSync: Completed successfully. Number of ads returned by Amazon: "+Object.keys(e.ads).length)}catch(t){e.log("amznads.setTargetingForGPTSync: ERROR - "+t)}},e.clearTargetingFromGPTAsync=function(){try{googletag&&googletag.pubads()&&googletag.pubads().clearTargeting(e.targetingKey),googletag.pubads().clearTargeting(e.vidKey)}catch(e){}},e.appendTargetingToAdServerUrl=function(t){var n,s=t;try{-1===t.indexOf("?")&&(t+="?");for(n in e.ads)e.ads.hasOwnProperty(n)&&(t+="&"+n+"=1");e.log("amznads.appendTargetingToAdServerUrl: Completed successfully. Number of ads returned by Amazon: "+e.ads.length)}catch(t){e.log("amznads.appendTargetingToAdServerUrl: ERROR - "+t)}return e.log("amznads.appendTargetingToAdServerUrl: input url: "+s+"\nreturning url: "+t),t},e.appendTargetingToQueryString=function(t){var n,s=t;try{for(n in e.ads)e.ads.hasOwnProperty(n)&&(t+="&"+n+"=1")}catch(t){e.log("amznads.appendTargetingToQueryString: ERROR - "+t)}return e.log("amznads.appendTargetingToQueryString: input query-string:"+s+"\nreturning query-string:"+t),t},e.getTokens=function(s){var t,n=[];try{for(t in e.ads)if(e.ads.hasOwnProperty(t)){if(s&&t.indexOf(s)<0)continue;n.push(t)}}catch(t){e.log("amznads.getTokens: ERROR - "+t)}return e.log("amznads.getTokens: returning tokens = "+n),n},e.getKeys=e.getTokens,e.getVid=function(){return e.amzn_vid},e.doAllTasks=function(){for(;e.tasks.length>0;){var t=e.tasks.shift();e.doTask(t)}},e.doTask=function(t){try{t.call()}catch(t){e.log("Failed calling task: "+t)}},e.tryGetAdsAsync=function(){e.asyncParams&&e.getAdsCallback(e.asyncParams.id,e.asyncParams.callbackFn,e.asyncParams.timeout,e.asyncParams.size,e.asyncParams.data)},e}(amznads||{},document,window,amzn_console),amznads.tryGetAdsAsync(),window.amzn_ads=amzn_ads,window.amznads=amznads