jQuery(function(e){if("undefined"==typeof wc_cart_fragments_params)return!1;n=!0,t=wc_cart_fragments_params.cart_hash_key;try{n="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc"),window.localStorage.setItem("wc","test"),window.localStorage.removeItem("wc")}catch{n=!1}function m(){n&&sessionStorage.setItem("wc_cart_created",(new Date).getTime())}function h(e){n&&(localStorage.setItem(t,e),sessionStorage.setItem(t,e))}u={url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",data:{time:(new Date).getTime()},timeout:wc_cart_fragments_params.request_timeout,success:function(t){t&&t.fragments&&(e.each(t.fragments,function(t,n){e(t).replaceWith(n)}),n&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(t.fragments)),h(t.cart_hash),t.cart_hash&&m()),e(document.body).trigger("wc_fragments_refreshed"))},error:function(){e(document.body).trigger("wc_fragments_ajax_error")}};function s(){e.ajax(u)}if(n){r=null,e(document.body).on("wc_fragment_refresh updated_wc_div",function(){s()}),e(document.body).on("added_to_cart removed_from_cart",function(e,n,s){var o=sessionStorage.getItem(t);o!=null&&""!==o||m(),sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(n)),h(s)}),e(document.body).on("wc_fragments_refreshed",function(){clearTimeout(r),r=setTimeout(s,864e5)}),e(window).on("storage onstorage",function(e){t===e.originalEvent.key&&localStorage.getItem(t)!==sessionStorage.getItem(t)&&s()}),e(window).on("pageshow",function(t){t.originalEvent.persisted&&(e(".widget_shopping_cart_content").empty(),e(document.body).trigger("wc_fragment_refresh"))});try{var t,n,r,l,d,u,c=JSON.parse(sessionStorage.getItem(wc_cart_fragments_params.fragment_name)),o=sessionStorage.getItem(t),a=Cookies.get("woocommerce_cart_hash"),i=sessionStorage.getItem("wc_cart_created");if(o!=null&&""!==o||(o=""),a!=null&&""!==a||(a=""),o&&(i==null||""===i))throw"No cart_created";if(i){if(l=+i+864e5,d=(new Date).getTime(),l<d)throw"Fragment expired";r=setTimeout(s,l-d)}if(!c||!c["div.widget_shopping_cart_content"]||o!==a)throw"No fragment";e.each(c,function(t,n){e(t).replaceWith(n)}),e(document.body).trigger("wc_fragments_loaded")}catch{s()}}else s();0<Cookies.get("woocommerce_items_in_cart")?e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show():e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").hide(),e(document.body).on("adding_to_cart",function(){e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()}),"undefined"!=typeof wp&&wp.customize&&wp.customize.selectiveRefresh&&wp.customize.widgetsPreview&&wp.customize.widgetsPreview.WidgetPartial&&wp.customize.selectiveRefresh.bind("partial-content-rendered",function(){s()})})