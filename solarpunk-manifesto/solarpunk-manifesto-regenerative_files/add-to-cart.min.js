jQuery(function(e){if("undefined"==typeof wc_add_to_cart_params)return!1;var t=function(){this.requests=[],this.addRequest=this.addRequest.bind(this),this.run=this.run.bind(this),e(document.body).on("click",".add_to_cart_button",{addToCartHandler:this},this.onAddToCart).on("click",".remove_from_cart_button",{addToCartHandler:this},this.onRemoveFromCart).on("added_to_cart",this.updateButton).on("ajax_request_not_sent.adding_to_cart",this.updateButton).on("added_to_cart removed_from_cart",{addToCartHandler:this},this.updateFragments)};t.prototype.addRequest=function(e){this.requests.push(e),1===this.requests.length&&this.run()},t.prototype.run=function(){var t=this,n=t.requests[0].complete;t.requests[0].complete=function(){"function"==typeof n&&n(),t.requests.shift(),0<t.requests.length&&t.run()},e.ajax(this.requests[0])},t.prototype.onAddToCart=function(t){var s,n=e(this);if(n.is(".ajax_add_to_cart"))return!n.attr("data-product_id")||(t.preventDefault(),n.removeClass("added"),n.addClass("loading"),!1===e(document.body).triggerHandler("should_send_ajax_request.adding_to_cart",[n])?(e(document.body).trigger("ajax_request_not_sent.adding_to_cart",[!1,!1,n]),!0):(s={},e.each(n.data(),function(e,t){s[e]=t}),e.each(n[0].dataset,function(e,t){s[e]=t}),e(document.body).trigger("adding_to_cart",[n,s]),void t.data.addToCartHandler.addRequest({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:s,success:function(t){t&&(t.error&&t.product_url?window.location=t.product_url:"yes"===wc_add_to_cart_params.cart_redirect_after_add?window.location=wc_add_to_cart_params.cart_url:e(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,n]))},dataType:"json"})))},t.prototype.onRemoveFromCart=function(t){var n=e(this),s=n.closest(".woocommerce-mini-cart-item");t.preventDefault(),s.block({message:null,overlayCSS:{opacity:.6}}),t.data.addToCartHandler.addRequest({type:"POST",url:wc_add_to_cart_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_from_cart"),data:{cart_item_key:n.data("cart_item_key")},success:function(t){t&&t.fragments?e(document.body).trigger("removed_from_cart",[t.fragments,t.cart_hash,n]):window.location=n.attr("href")},error:function(){window.location=n.attr("href")},dataType:"json"})},t.prototype.updateButton=function(t,n,s,o){(o=0[0]!==o&&o)&&(o.removeClass("loading"),n&&o.addClass("added"),n&&!wc_add_to_cart_params.is_cart&&0===o.parent().find(".added_to_cart").length&&o.after('<a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+wc_add_to_cart_params.i18n_view_cart+"</a>"),e(document.body).trigger("wc_cart_button_updated",[o]))},t.prototype.updateFragments=function(t,n){n&&(e.each(n,function(t){e(t).addClass("updating").fadeTo("400","0.6").block({message:null,overlayCSS:{opacity:.6}})}),e.each(n,function(t,n){e(t).replaceWith(n),e(t).stop(!0).css("opacity","1").unblock()}),e(document.body).trigger("wc_fragments_loaded"))},new t})